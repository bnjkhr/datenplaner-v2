// Firestore Security Rules für Read-Only Zugriff
// Diese Rules erlauben öffentlichen Read-Only Zugriff auf die public/data Collections

rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // Bestehende Rules für authentifizierte Benutzer (falls vorhanden)
    // match /artifacts/{appId}/private/{document=**} {
    //   allow read, write: if request.auth != null;
    // }
    
    // NEU: Read-Only Zugriff auf public data für alle (auch unauthentifizierte)
    match /artifacts/{appId}/public/data/{collection}/{document=**} {
      allow read: if true; // Erlaubt jedem das Lesen der öffentlichen Daten
      allow write: if false; // Verhindert jegliche Schreibvorgänge
    }
    
    // NEU: Read-Only Zugriff auf Meta-Daten (für lastChange etc.)
    match /artifacts/{appId}/public/meta {
      allow read: if true; // Erlaubt das Lesen von Meta-Informationen
      allow write: if false; // Verhindert Schreibvorgänge
    }
    
    // Fallback: Alle anderen Pfade blockieren
    match /{document=**} {
      allow read, write: if false;
    }
  }
}